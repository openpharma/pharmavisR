<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Wrapper around ggplot2::annotation_custom for simplified annotation to ggplot2 plots.
This function accepts a string, dataframe, data.table, tibble or customized
objects of class gtable and places them on the specified location on
the ggplot. The layout is fixed: bold column headers and plain body.
Only the font size and type can be chosen.
Both the initial plot as the individual annotation are stored as attribute component
in the final object."><title>Add annotations to a visR object — add_annotation • visR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add annotations to a visR object — add_annotation"><meta property="og:description" content="Wrapper around ggplot2::annotation_custom for simplified annotation to ggplot2 plots.
This function accepts a string, dataframe, data.table, tibble or customized
objects of class gtable and places them on the specified location on
the ggplot. The layout is fixed: bold column headers and plain body.
Only the font size and type can be chosen.
Both the initial plot as the individual annotation are stored as attribute component
in the final object."><meta property="og:image" content="https://openpharma.github.io/visR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">visR</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CDISC_ADaM.html">Survival Analysis with visR using CDISC ADaM Time-To-Event Analysis Dataset (ADTTE)</a>
    <a class="dropdown-item" href="../articles/Consort_flow_diagram.html">Creating consort flow diagram with visR</a>
    <a class="dropdown-item" href="../articles/Styling_KM_plots.html">Styling survival plots</a>
    <a class="dropdown-item" href="../articles/Time_to_event_analysis.html">Survival Analysis with visR</a>
    <a class="dropdown-item" href="../articles/interactive_tte_tutorial/tte_tutorial.html">visR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/openpharma/visR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add annotations to a visR object</h1>
      <small class="dont-index">Source: <a href="https://github.com/openpharma/visR/blob/HEAD/R/add_annotation.R" class="external-link"><code>R/add_annotation.R</code></a></small>
      <div class="d-none name"><code>add_annotation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Wrapper around ggplot2::annotation_custom for simplified annotation to ggplot2 plots.
This function accepts a string, dataframe, data.table, tibble or customized
objects of class <code>gtable</code> and places them on the specified location on
the <code>ggplot</code>. The layout is fixed: bold column headers and plain body.
Only the font size and type can be chosen.
Both the initial plot as the individual annotation are stored as attribute <code>component</code>
in the final object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_annotation</span><span class="op">(</span></span>
<span>  gg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  base_family <span class="op">=</span> <span class="st">"sans"</span>,</span>
<span>  base_size <span class="op">=</span> <span class="fl">11</span>,</span>
<span>  xmin <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>  xmax <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  ymin <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>  ymax <span class="op">=</span> <span class="cn">Inf</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>gg</dt>
<dd><p>Object of class <code>ggplot</code>.</p></dd>


<dt>label</dt>
<dd><p><code>String, dataframe, data.table, tibble</code> used to annotate the <code>ggplot</code>.</p></dd>


<dt>base_family</dt>
<dd><p><code>character</code>. Base font family</p></dd>


<dt>base_size</dt>
<dd><p><code>numeric</code>. Base font size in pt</p></dd>


<dt>xmin</dt>
<dd><p>x coordinates giving horizontal location of raster in which to fit annotation.</p></dd>


<dt>xmax</dt>
<dd><p>x coordinates giving horizontal location of raster in which to fit annotation.</p></dd>


<dt>ymin</dt>
<dd><p>y coordinates giving vertical location of raster in which to fit annotation.</p></dd>


<dt>ymax</dt>
<dd><p>y coordinates giving vertical location of raster in which to fit annotation.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Object of class <code>ggplot</code> with added annotation with an object of class <code>gtable</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">tableGrob</a></code> <code><a href="https://ggplot2.tidyverse.org/reference/annotation_custom.html" class="external-link">annotation_custom</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Estimate survival</span></span></span>
<span class="r-in"><span><span class="va">surv_object</span> <span class="op">&lt;-</span> <span class="fu">visR</span><span class="fu">::</span><span class="fu"><a href="estimate_KM.html">estimate_KM</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">adtte</span>, strata <span class="op">=</span> <span class="st">"TRTP"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We want to annotate the survival KM plot with a simple string comment</span></span></span>
<span class="r-in"><span><span class="fu">visR</span><span class="fu">::</span><span class="fu"><a href="visr.html">visr</a></span><span class="op">(</span><span class="va">surv_object</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">visR</span><span class="fu">::</span><span class="fu">add_annotation</span><span class="op">(</span></span></span>
<span class="r-in"><span>    label <span class="op">=</span> <span class="st">"My simple comment"</span>,</span></span>
<span class="r-in"><span>    base_family <span class="op">=</span> <span class="st">"sans"</span>,</span></span>
<span class="r-in"><span>    base_size <span class="op">=</span> <span class="fl">15</span>,</span></span>
<span class="r-in"><span>    xmin <span class="op">=</span> <span class="fl">110</span>,</span></span>
<span class="r-in"><span>    xmax <span class="op">=</span> <span class="fl">180</span>,</span></span>
<span class="r-in"><span>    ymin <span class="op">=</span> <span class="fl">0.80</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-plt img"><img src="add_annotation-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Currently, care needs to be taken on the x-y values relative</span></span></span>
<span class="r-in"><span><span class="co">## to the plot data area. Here we are plotting outside of the data area.</span></span></span>
<span class="r-in"><span><span class="fu">visR</span><span class="fu">::</span><span class="fu"><a href="visr.html">visr</a></span><span class="op">(</span><span class="va">surv_object</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">visR</span><span class="fu">::</span><span class="fu">add_annotation</span><span class="op">(</span></span></span>
<span class="r-in"><span>    label <span class="op">=</span> <span class="st">"My simple comment"</span>,</span></span>
<span class="r-in"><span>    base_family <span class="op">=</span> <span class="st">"sans"</span>,</span></span>
<span class="r-in"><span>    base_size <span class="op">=</span> <span class="fl">15</span>,</span></span>
<span class="r-in"><span>    xmin <span class="op">=</span> <span class="fl">210</span>,</span></span>
<span class="r-in"><span>    xmax <span class="op">=</span> <span class="fl">380</span>,</span></span>
<span class="r-in"><span>    ymin <span class="op">=</span> <span class="fl">1.0</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-plt img"><img src="add_annotation-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We may also want to annotate a KM plot with information</span></span></span>
<span class="r-in"><span><span class="co">## from additional tests or estimates. This example we annotate</span></span></span>
<span class="r-in"><span><span class="co">## with p-values contained in a tibble</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## we calculate p-values for "Equality across strata"</span></span></span>
<span class="r-in"><span><span class="va">lbl</span> <span class="op">&lt;-</span> <span class="fu">visR</span><span class="fu">::</span><span class="fu"><a href="get_pvalue.html">get_pvalue</a></span><span class="op">(</span><span class="va">surv_object</span>,</span></span>
<span class="r-in"><span>  statlist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="st">"pvalue"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"All"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## display p-values</span></span></span>
<span class="r-in"><span><span class="va">lbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Equality across strata p-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               Log-Rank  &lt;0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               Wilcoxon  &lt;0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            Tarone-Ware  &lt;0.001</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Now annotate survival KM plot with the p-values</span></span></span>
<span class="r-in"><span><span class="fu">visR</span><span class="fu">::</span><span class="fu"><a href="visr.html">visr</a></span><span class="op">(</span><span class="va">surv_object</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">visR</span><span class="fu">::</span><span class="fu">add_annotation</span><span class="op">(</span></span></span>
<span class="r-in"><span>    label <span class="op">=</span> <span class="va">lbl</span>,</span></span>
<span class="r-in"><span>    base_family <span class="op">=</span> <span class="st">"sans"</span>,</span></span>
<span class="r-in"><span>    base_size <span class="op">=</span> <span class="fl">9</span>,</span></span>
<span class="r-in"><span>    xmin <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    xmax <span class="op">=</span> <span class="fl">180</span>,</span></span>
<span class="r-in"><span>    ymin <span class="op">=</span> <span class="fl">0.80</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-plt img"><img src="add_annotation-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mark Baillie, Diego Saldana, Charlotta Fruechtenicht, Marc Vandemeulebroecke, Thanos Siadimas, Pawel Kawski, <a href="https://www.linkedin.com/in/stevenhaesendonckx/" class="external-link">Steven Haesendonckx</a>, <a href="https://www.epijim.uk/" class="external-link">James Black</a>, Pelagia Alexandra Papadopoulou, Tim Treis, Rebecca Albrecht, <a href="https://www.danieldsjoberg.com/" class="external-link">Daniel D. Sjoberg</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

